<div class="alert alert-success" *ngIf="msg !=undefined"> Product Updated Successfully</div>
<div *ngIf="updateDiv"> 
    <Div class="mt-2 text-center" ><H1 >Update Product</H1> </Div>
  
    <form #frm="ngForm" (ngSubmit)="updateProduct()">
        <div class="form-group">
            <label for="name" class="col-sm-3 control-label"></label>
            <div class="col-md-12">
                <label>Product Name</label>
                <input type="text" name="name" [(ngModel)]="modifyProduct.name" #mlname="ngModel" placeholder="Product Name" class="form-control" [pattern]="productname_pattern" required>
                <div class="alert alert-danger" *ngIf="!mlname.value && mlname.touched"> Product name is required</div>  
                <div class="alert alert-danger" *ngIf="mlname.invalid && mlname.touched"> Product name should contain alphanumerics only</div>  
            </div>
        </div>

        <div class="form-group">
            <label for="code" class="col-sm-3 control-label"></label>
            <div class="col-md-12">
                <label>Product Code</label>
                <input type="text" name="code" [(ngModel)]="modifyProduct.code" #mlcode="ngModel" placeholder=" Product Code" class="form-control" [pattern]="productcode_pattern" disabled>
            </div>
        </div>

        <div class="form-group">
            <label for="category" class="col-sm-3 control-label"></label>
            <div class="col-md-12">
                <label>Product Category</label>
                <select class="form-control" name="category" [(ngModel)]="modifyProduct.category" #mlcategory="ngModel" required>
                    <option value="Fruits">Fruits</option>
                    <option value="Vegetables">Vegetables</option>
                    <option value="Beverages">Beverages</option>
                    <option value="Non-Veg">Non-Veg</option>
                    <option value="Snacks">Snacks</option>
                    <option value="Foodgrains, Oil & Masala">Foodgrains, Oil & Masala</option>
                </select>
                <div class="alert alert-danger" *ngIf="!mlcategory.value && mlcategory.touched"> Product category is required</div>  
            </div>
        </div>

        <div class="form-group">
            <label for="price" class="col-sm-3 control-label"></label>
            <div class="col-md-12">
                <label>Product Price</label>
                <input type="number" name="price" [(ngModel)]="modifyProduct.price" #mlprice="ngModel" placeholder="Product Price" class="form-control" required>
                <div class="alert alert-danger" *ngIf="!mlprice.value && mlprice.touched"> Product price is required</div>  
            </div>
        </div>

        <div class="form-group">
            <label for="quantity" class="col-sm-3 control-label"></label>
            <div class="col-md-12">
                <label>Product Quantity</label>
                <input type="number" name="quantity" [(ngModel)]="modifyProduct.quantity" #mlquantity="ngModel" placeholder="Product Quantity" class="form-control" required>
                <div class="alert alert-danger" *ngIf="!mlquantity.value && mlquantity.touched"> Product quantity is required</div>  
            </div>
        </div>

        <div class="form-group">
            <label for="desc" class="col-sm-3 control-label"></label>
            <div class="col-sm-12">
                <label>Product Description</label>
                <textarea  name="desc" cols="20" rows="3" class="form-control" [(ngModel)]="modifyProduct.description" #mldescription="ngModel" placeholder="Description of the Product" required></textarea>
                <div class="alert alert-danger" *ngIf="!mldescription.value && mldescription.touched"> Product description is required</div>  
            </div>
        </div>
        
        <div class="mt-2 text-center">
            <input type="submit" value="Update Product" [disabled]="!frm.valid" class="btn btn-success" [disabled]="!frm.valid"/>&nbsp;&nbsp;&nbsp;&nbsp;
            <button type="button" (click)="cancel()" value="Cancel" class="btn btn-danger">Cancel</button>
        </div>
       
    </form>
</div>

<div  *ngIf="!updateDiv">
    <Div class="mt-2 text-center" ><H1 >Products</H1> </Div>
    
    <table class="table table-primary table-striped table-hover col-md-8 mx-auto mt-3" border="1">

    <tr>
        <th>Product Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Operations</th>        
    </tr>
    <tr *ngFor="let product of products">
        <td>{{product.name}}</td>
        <td>{{product.description | titlecase}}</td>
        <td>{{product.price |currency:'INR'}}</td>
        <td>{{product.quantity}}</td>
        <td>
            <button type="submit" (click)="update(product)" value="Update" class="btn btn-success">Update</button>
        </td>
    </tr>
</table> 
</div>
    